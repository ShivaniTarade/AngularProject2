(window.webpackJsonp=window.webpackJsonp||[]).push([[64,29],{"8UZs":function(e,t,a){},BeCd:function(e,t,a){var n=a("mXGw"),r=a.n(n),o=a("W0B4"),i=a("/m4v"),s=a("oNR1"),c=a("v4bl"),l=a.n(c),u=a("9jVY"),p=a("vWub"),d=a("qim3");window.googletag={},window.googletag.cmd=window.googletag.cmd||[];var m=googletag,f={gptUrl:"//www.googletagservices.com/tag/js/gpt.js"}.gptUrl,g={processingGoogletag:function(){!function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src=""+document.location.protocol+f;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()},enableGoogleAds:function(e,t,a){e&&e.length&&m.pubads().setTargeting("vtc",e),t&&(m.pubads().setTargeting("hhID",t),m.pubads().setTargeting("site","groceries"),m.pubads().setTargeting("userLoggedInStatus",a),m.pubads().collapseEmptyDivs(),m.pubads().enableSingleRequest(),m.pubads().enableAsyncRendering(),m.enableServices())}},b=(a("8UZs"),/[^a-zA-Z]/g),h=/<br\s*[/]?>/gi;a.d(t,"a",(function(){return j}));var y=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},v=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=function(e){function t(){var e,a,n;O(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return a=n=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.mappingFullPage=function(){m.sizeMapping().addSize([1024,768],[[540,300]]).addSize([768,500],[360,200]).addSize([1,1],[360,200]).build()},n.renderCatNavAd=function(){var e=n.props.selectionTree;if(1===e.length){var t=(y(e||[],1)[0]||{}).displayName;if(t){var a=n.parseDisplayName(t).replace(b,"");n.pushToGoogleTag("/227091351/GHS/"+a+"/FULLPAGE",(function(){n.setTargetParamValue("pagetype","Category"),n.setTargetParamValue("categoryID",a)}))}}},n.processAds=function(){var e=n.props,t=e.selectionTree;e.isTaxonomyVisible&&t.length?n.renderCatNavAd():n.renderPageSpecificAds()},n.currentPage=n.getCurrentPage(),n.generateBannerId=function(){return"iabBanner"+n.props.position+Date.now()},n.iabBannerId=n.generateBannerId(),T(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),v(t,[{key:"getSizeMapping",value:function(){var e=[[320,50],[728,90]];return"bottom"===this.props.position.toLowerCase()&&e.push([300,250]),"home"===this.currentPage&&e.push([970,250]),e}},{key:"getAdSlotMapping",value:function(){var e=this.props.placementType;return{leaderboard:"LB",mpu:"MPU",fullPage:"FULLPAGE"}[l()(e)]}},{key:"mappingLB",value:function(){return m.sizeMapping().addSize([1024,768],[[970,90],[728,90]]).addSize([768,500],[728,90]).addSize([1,1],[320,50]).build()}},{key:"mappingBottomLB",value:function(){return m.sizeMapping().addSize([1024,768],[[970,90],[728,90]]).addSize([768,500],[728,90]).addSize([1,1],[300,250]).build()}},{key:"mappingLBMPU",value:function(){return m.sizeMapping().addSize([1024,768],[[728,90]]).addSize([768,500],[728,90]).addSize([1,1],[[320,50],[300,250]]).build()}},{key:"mappingLBM",value:function(){return m.sizeMapping().addSize([1024,768],[[728,90]]).addSize([768,500],[728,90]).addSize([1,1],[320,50]).build()}},{key:"getScreenResToSizeMapping",value:function(){var e=this.props,t=e.position;return"Full Page"===e.placementType?this.mappingFullPage():"home"===this.currentPage?"bottom"===t.toLowerCase()?this.mappingLB():this.mappingBottomLB():this.mappingLBMPU()}},{key:"parseDisplayName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(h,"")}},{key:"setTargetParamValue",value:function(e,t){m.pubads().setTargeting(e,t)}},{key:"pushToGoogleTag",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.props,r=n.position,o=n.visitorId,i=n.profileId,s=n.loginStatus;m.cmd.push((function(){var n=m.defineSlot(e,t.getSizeMapping(),t.iabBannerId);n&&(n.defineSizeMapping(t.getScreenResToSizeMapping()).setTargeting("pos",[r]).addService(m.pubads()),a(),g.enableGoogleAds(o,i,s))})),m.cmd.push((function(){return m.display(t.iabBannerId)}))}},{key:"displayHomePageAds",value:function(){var e=this,t=this.props,a=t.loginStatus,n=t.position,r={anonymous:"NotSignedIn",RNP:"RNP"}[a]||"SignedIn";this.pushToGoogleTag("/227091351/GHS/Homepage/"+r+"/"+n+this.getAdSlotMapping(),(function(){e.setTargetParamValue("pagetype","Homepage")}))}},{key:"displayTagTaxonomyPage",value:function(){var e=this,t=void 0,a="",n="",r="",o="",i=void 0,s=this.props.taxonomyData,c=s.selectedItem,l=(c=void 0===c?{}:c).catType,u=c.displayName,p=void 0===u?"":u,d=s.selectedCat,m=s.selectedDept;switch(l){case"cat":t=(n=this.parseDisplayName(p)).replace(b,""),a="Category";break;case"dept":r=this.parseDisplayName(p),t=this.parseDisplayName(d.displayName).replace(b,"")+"/"+r.replace(b,""),a="Department";break;case"aisle":i=(o=this.parseDisplayName(p)).replace(b,""),t=this.parseDisplayName(d.displayName).replace(b,"")+"/"+this.parseDisplayName(m.displayName).replace(b,"")+"/"+i,a="Aisle";break;default:return}this.pushToGoogleTag("/227091351/GHS/"+t,(function(){switch(e.setTargetParamValue("pagetype",a),!0){case n:e.setTargetParamValue("categoryID",n.replace(b,""));break;case r:e.setTargetParamValue("departmentID",r.replace(b,""));break;case o:e.setTargetParamValue("aisleID",o.replace(b,""))}}))}},{key:"displayTagFavoritesPage",value:function(){var e=this,t=this.props.position;this.pushToGoogleTag("/227091351/GHS/Favourites/"+t+this.getAdSlotMapping(),(function(){e.setTargetParamValue("pagetype","Favourites")}))}},{key:"displayTagShelfPage",value:function(){var e,t,a,n=this,r=this.props.taxonomyData,o=r.selectedCat,i=r.selectedDept,s=r.selectedAisle,c=r.selectedShelf,l=this.parseDisplayName(c.displayName),u=l.replace(b,""),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.parseDisplayName(e).replace(b,"")};this.pushToGoogleTag("/227091351/GHS/"+(e=p(o.displayName),t=p(i.displayName),a=p(s.displayName),(e?e+"/":"")+(t?t+"/":"")+(a?a+"/":"")+u),(function(){n.setTargetParamValue("pagetype","Shelf"),l&&n.setTargetParamValue("ShelfID",u)}))}},{key:"displayGoogleAdsSearchMiddle",value:function(){var e=this,t=this.props,a=t.visitorId,n=t.profileId,r=t.loginStatus,o=t.searchTerm;m.cmd.push((function(){var t=e.mappingLBM(),i=m.defineSlot("/227091351/GHS/Search/MiddleLB",[[728,90],[320,50]],"googleAdsSearchMiddleLB");i&&(i.defineSizeMapping(t).setTargeting("pos",["Middle"]).addService(m.pubads()),e.setTargetParamValue("pagetype","Search"),e.setTargetParamValue("SearchTerm",o&&o.replace(b,"")),g.enableGoogleAds(a,n,r))})),m.cmd.push((function(){return m.display("googleAdsSearchMiddleLB")}))}},{key:"displayTagSearchPage",value:function(){var e=this,t=this.props,a=t.position,n=t.searchTerm;this.displayGoogleAdsSearchMiddle(),this.pushToGoogleTag("/227091351/GHS/Search/"+a+this.getAdSlotMapping(),(function(){e.setTargetParamValue("pagetype","Search"),e.setTargetParamValue("SearchTerm",n&&n.replace(b,""))}))}},{key:"displayTagOrderConfirmPage",value:function(){var e=this;this.pushToGoogleTag("/227091351/GHS/ExitPage1/TopLeaderboard",(function(){e.setTargetParamValue("pagetype","confirmation")}))}},{key:"displayTagThankYouPage",value:function(){var e=this;this.pushToGoogleTag("/227091351/GHS/ExitPage2",(function(){e.setTargetParamValue("pagetype","OrderExitPage")}))}},{key:"renderPageSpecificAds",value:function(){switch(this.currentPage.toLowerCase()){case"home":return this.displayHomePageAds();case"cat":case"dept":case"aisle":return this.displayTagTaxonomyPage();case"favourites-lists":return this.displayTagFavoritesPage();case"shelf":return this.displayTagShelfPage();case"search":return this.displayTagSearchPage();case"confirmation":return this.displayTagOrderConfirmPage();case"thanku":return this.displayTagThankYouPage();default:return null}}},{key:"componentDidUpdate",value:function(){m&&this.processAds()}},{key:"componentDidMount",value:function(){g.processingGoogletag(),this.processAds()}},{key:"getCurrentPage",value:function(){var e=this.props.location.pathname,t=e.includes("checkout")?2:1;return e.split("/")[t]||"home"}},{key:"render",value:function(){var e=this.props.className;return r.a.createElement("div",{className:"iab-banner "+e,id:this.iabBannerId})}}]),t}(n.PureComponent);k.propTypes={placementType:o.string.isRequired,position:o.string.isRequired,loginStatus:o.string.isRequired,taxonomyData:Object(o.shape)({displayName:o.string,catType:o.string}),location:Object(o.shape)({pathname:o.string}).isRequired,searchTerm:o.string,visitorId:o.string,profileId:o.string,className:o.string,isTaxonomyVisible:o.bool,selectionTree:Object(o.arrayOf)(Object(o.shape)({displayName:o.string}))},k.defaultProps={className:"",searchTerm:"",visitorId:"",profileId:"",taxonomyData:{},isTaxonomyVisible:!1,selectionTree:[]};var S=Object(i.b)((function(e){return{visitorId:Object(u.a)("vtc"),profileId:Object(p.E)(e),loginStatus:Object(p.m)(e),isTaxonomyVisible:Object(d.k)(e),selectionTree:Object(d.c)(e)}}))(k),j=Object(s.j)(S)},FLbi:function(e,t,a){a.r(t);var n=a("mXGw"),r=a.n(n),o=a("/m4v"),i=a("YFs1"),s=a.n(i),c=a("W0B4"),l=a("6Wqb"),u=a("+s/N"),p=a("GItb"),d=a("IUY8"),m=a("tXPM"),f=a("HR3z"),g=a("uVNS"),b=a("rOcY"),h=function(e){var t=e.className,a=e.children;return r.a.createElement("div",{className:Object(l.a)({blk:"asda-banner-static",className:t})},a)};h.propTypes={children:c.node.isRequired,className:c.string},h.defaultProps={className:null};var y=Object(n.memo)(h),v=(a("inSG"),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}());function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=b.h.bannerImpression,S=b.h.bannerTap,j=function(e){function t(){var e,a,n;O(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.triggerAnalytics=function(e){var t=n.props;(0,t.triggerBannerImpression)(t.trackingCode,e)},n.handleClick=function(e){var t=n.props,a=t.closeNav,r=t.history;n.triggerAnalytics(S),a(),e&&r.push(e),Object(p.b)(0,0)},n.renderCMSBanner=function(){var e=n.props,t=e.mediaURL,a=e.imageAlt,o=e.link,i=e.placementKey,s=e.setCriteoBannerStatus,c=e.match.params.catname,p=e.firstProductId,m=Object(u.a)(o);return"VR"===i&&s(c+"-"+p),m?r.a.createElement(d.l,{asButton:!0,datAutoId:"linkBannerStaticImg",clickHandler:function(){return n.handleClick(m)}},r.a.createElement("img",{className:Object(l.a)({blk:"asda-banner-static",elt:"image"}),src:t,alt:a,loading:"lazy"})):r.a.createElement("img",{className:Object(l.a)({blk:"asda-banner-static",elt:"image"}),src:t,alt:a,loading:"lazy"})},T(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),v(t,[{key:"componentDidMount",value:function(){this.triggerAnalytics(k)}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.mediaURL;return s()(a)?null:r.a.createElement(n.Fragment,null,r.a.createElement(y,{className:t},this.renderCMSBanner()))}}]),t}(n.PureComponent);j.propTypes={mediaURL:c.string.isRequired,imageAlt:c.string.isRequired,link:Object(c.shape)({path:c.string,queryString:c.string}).isRequired,placementKey:c.string,match:Object(c.shape)({params:Object(c.shape)({catname:c.string})}).isRequired,firstProductId:c.string,triggerBannerImpression:c.func.isRequired,setCriteoBannerStatus:c.func.isRequired,trackingCode:c.string.isRequired,closeNav:c.func,history:Object(c.shape)({push:c.func}).isRequired,className:c.string},j.defaultProps={placementKey:"",firstProductId:"",closeNav:function(){},className:null};t.default=Object(g.a)(Object(o.b)(null,{triggerBannerImpression:m.a,setCriteoBannerStatus:f.c})(j),y)},HR3z:function(e,t,a){a("j5ed"),a("aenv");var n=a("keiz");a("edSL"),a("v4bl"),a("JBlR"),a("kqK5"),a("fk5z");Object.assign,n.a.SET_EVENT_PRODUCT_REDIRECT;var r=n.a.CLEAR_EVENT_PRODUCT_REDIRECT,o=function(){return{type:r}},i=n.a.SET_CRITEO_BANNER_STATUS,s=n.a.CLEAR_CRITEO_BANNER_STATUS,c=function(e){return{type:i,catName:e}},l=function(){return{type:s}};a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return l}));Object.assign,n.a.FETCH_CRITEO_REQUEST,n.a.FETCH_CRITEO_SUCCESS,n.a.FETCH_CRITEO_ERROR,n.a.CLEAR_CRITEO},eqE1:function(e,t,a){},inSG:function(e,t,a){},kSFl:function(e,t,a){var n=a("zYYD"),r=0;e.exports=function(e){var t=++r;return n(e)+t}},nIQh:function(e,t,a){},vX1W:function(e,t,a){a.r(t);var n=a("mXGw"),r=a.n(n),o=a("/m4v"),i=a("oNR1"),s=a("W0B4"),c=a("qim3"),l=a("eWQw"),u=a("ZCZy"),p=a("vWub"),d=a("ERYi"),m=a("0vxw"),f=a("7mLg"),g=a("6Wqb"),b=a("fjoU"),h=a("f4E9"),y=a("xBw7"),v=a("iM/o"),O=a("VWwc"),T=a("9DBn"),k=a("tXPM"),S=a("rOcY"),j=a("Z7H9"),E=a("IUY8"),I=a("SKM5"),w=a.n(I),C=a("5Zwl"),N=a.n(C),R=a("6Vfs"),x=a("kSFl"),P=a.n(x),A=a("FLbi"),M=a("BeCd"),_=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var D="h-nav",q="egc-message-container",z="egc-button-container",L={triggerSignal:k.d},H=function(e){function t(){var e,a,n;B(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return a=n=G(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.triggerAnalytics=function(e){var t=n.props;(0,t.triggerSignal)({cartId:t.cartID,channel:"taxonomy",eventId:S.h.standardButtonClick,isPageview:!1,linkButtonText:e})},G(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),_(t,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement(E.k,{alt:"eGift cards",className:Object(g.a)({blk:D,elt:"egc-banner-container"}),src:"https://i.groceries.asda.com/dm/asdagroceries/image@3x",dataAutoId:"imageEGiftCardsBanner",title:"eGift cards",ariaProps:{"aria-describedby":"eGift card banner image"}}),r.a.createElement("div",{className:Object(g.a)({blk:D,elt:q})},r.a.createElement("div",{className:Object(g.a)({blk:D,elt:q,mods:["message"]})},r.a.createElement("p",{className:Object(g.a)({blk:D,elt:q,mods:["primary-msg"]})},"Gift something they'll"," ",r.a.createElement("br",null),"actually use",r.a.createElement("br",null)),r.a.createElement("p",{className:Object(g.a)({blk:D,elt:q,mods:["secondary-msg"]})},"Choose from Asda and big"," ",r.a.createElement("br",null),"brand gift cards for the"," ",r.a.createElement("br",null),"perfect, practical gift.")),r.a.createElement("div",{className:Object(g.a)({blk:D,elt:z})},r.a.createElement(E.d,{asAnchor:!0,className:Object(g.a)({blk:D,elt:z,mods:["button"]}),dataAutoId:"btnBuyGiftCards",fluid:!0,href:"https://cards.asda.com/asda-asda-egift",target:"_blank",clickHandler:function(){return e.triggerAnalytics("btn_gc_navimage_buygiftcards")},ariaProps:{"aria-label":"Buy gift cards button"}},"Buy gift cards"),r.a.createElement(E.d,{asAnchor:!0,className:Object(g.a)({blk:D,elt:z,mods:["button"]}),dataAutoId:"btnCheckBalance",fluid:!0,href:"https://cards.asda.com/login?ReturnUrl=%2forder%2fhistory",target:"_blank",clickHandler:function(){return e.triggerAnalytics("btn_gc_navimage_checkbalance")},ariaProps:{"aria-label":"Check balance button"},outline:!0},"Check balance")),r.a.createElement("p",{className:Object(g.a)({blk:D,elt:z,mods:["message"]})},"Opens in a new window")))}}]),t}(n.PureComponent);H.propTypes={cartID:s.string,triggerSignal:s.func.isRequired},H.defaultProps={cartID:""};var V=Object(o.b)((function(e){return{cartID:Object(m.h)(e)}}),L)(H),U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var F=function(e){var t=e.taxonomy,a=e.banners,o=e.taxonomySelection,i=e.isOffers,s=e.onItemClick,c=e.isEGCenabled,l=i?"top-offers":"top",u=[].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(o)).pop()||l,p=a[u]||[],d={BannerStatic:A.default,IAB:M.a},m=function(e){s(e,{selection:[]})},f=u.toString().includes("cards.asda.com")&&c,b=Object(g.a)({blk:"h-nav",elt:"egc-container"}),h=Object(g.a)({blk:"h-nav",elt:"banner-container",mods:[t.length+"-columns"]});return r.a.createElement(n.Fragment,null,f&&r.a.createElement("div",{className:b},r.a.createElement(V,{closeNav:m})),p.length>0&&!f&&r.a.createElement("div",{className:h},p.map((function(e){var t=e.renderer,a=e.placementType,n=void 0===a?"":a,o=d[t],i="BannerStatic"===t?P()(e.mediaURL):P()(t+":"+n);return r.a.createElement(o,U({key:i},e,{closeNav:m}))}))))};F.propTypes={taxonomy:Object(s.arrayOf)(Object(s.arrayOf)(Object(s.shape)({selected:s.bool,dimvalid:Object(s.oneOfType)([s.number,s.string]),displayName:s.string,catType:s.string,parent:Object(s.shape)({displayName:s.string}),hasChildren:s.bool,selection:Object(s.arrayOf)(Object(s.oneOfType)([s.number,s.string]))}).isRequired).isRequired).isRequired,taxonomySelection:Object(s.arrayOf)(s.number).isRequired,banners:Object(s.objectOf)(Object(s.arrayOf)(Object(s.shape)({link:Object(s.shape)({path:s.string}),mediaURL:s.string,imageAlt:s.string}))),isOffers:s.bool.isRequired,onItemClick:s.func.isRequired,isEGCenabled:s.bool},F.defaultProps={banners:[],isEGCenabled:!1};var Y=Object(n.memo)(F),W=(a("nIQh"),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}());function K(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var Z=function(e){var t=e.children,a=e.onClick,n=e.onHover,o=e.onOut,i=e.showArrow,s=e.active,c=e.highlight,l=e.onTouch,u=e.topOffer,p=e.yourRegular,d=e.isEGC,m=e.displayName;return r.a.createElement("li",{className:Object(g.a)({blk:"h-nav",elt:"item"}),role:"menuitem"},r.a.createElement("button",{className:Object(g.a)({blk:"h-nav",elt:"item-button",mods:[s&&"active",i&&"has-children",c&&"highlight",u&&"top-offer",p&&"your-regular"]}),onClick:a,onTouchStart:l,onTouchEnd:function(e){return e.preventDefault()},onMouseOver:n,onMouseOut:o,onFocus:n,onBlur:o,type:"button","aria-expanded":i,"aria-haspopup":i},d&&r.a.createElement(E.b,{value:"new",dataAutoId:"eGiftCardBadge",className:Object(g.a)({blk:"h-nav",elt:"e-gift-card-badge"})}),i&&"Gift Cards"!==m&&r.a.createElement(E.j,{className:Object(g.a)({blk:"h-nav",elt:"item-icon"}),rotate:"270",size:"small",color:"dark-gray",name:"chevron-down"}),r.a.createElement("span",{className:Object(g.a)({blk:"h-nav",elt:"item-text"})},t)))};Z.propTypes={children:s.node.isRequired,highlight:s.bool,topOffer:s.bool,yourRegular:s.bool,showArrow:s.bool,active:s.bool,onClick:s.func,onHover:s.func,onTouch:s.func,onOut:s.func,isEGC:s.bool,displayName:s.string},Z.defaultProps={highlight:!1,topOffer:!1,yourRegular:!1,showArrow:!1,active:!1,onClick:function(){},onHover:function(){},onTouch:function(){},onOut:function(){},isEGC:!1,displayName:""};var X=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Q.call(a);var n=e.onItemMouseOver;return a.onItemMouseOver=N()(n,200),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),W(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyboardInput)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyboardInput)}},{key:"render",value:function(){var e=this.props,t=e.taxonomy,a=e.banners,n=e.taxonomySelection,o=e.isOffers,i=e.onItemClick,s=e.isEGCenabled,c=Object(g.a)({blk:"h-nav",elt:"sections-container",mods:[t.length+"-columns"]});return r.a.createElement("nav",{className:Object(g.a)({blk:"h-nav"})},r.a.createElement("div",{className:c},this.renderTaxonomy()),r.a.createElement(Y,{taxonomy:t,banners:a,taxonomySelection:n,isOffers:o,onItemClick:i,isEGCenabled:s}))}}]),t}(n.Component),Q=function(){var e=this;this.getSelectedItem=function(){return e.props.taxonomy.reduce((function(e,t){return t.reduce((function(e,t){return t.selected?t:e}),e)}),{})},this.getSelectionIndex=function(){return e.props.taxonomy.reduce((function(e,t,a){return t.reduce((function(e,t,n){return t.selected?{column:a,row:n}:e}),e)}),{column:0,row:-1})},this.getSelectionFromIndex=function(t){var a=t.column,n=t.row,r=e.props,o=r.taxonomy,i=r.taxonomySelection,s=n;s<0&&(s=0),s>o[a].length-1&&(s=o[a].length-1);var c=o[a][s].dimvalid;return[].concat(K(i.slice(0,i.length-1)),[c])},this.handleKeyboardInput=function(t){var a=t.keyCode||t.which||null,n=e.props,r=n.taxonomySelection,o=n.onItemMouseOver,i=n.onItemClick,s=n.taxonomy,c=r.length,l=s.length;switch(w()(R.a)[a]){case"ESC":e.close(t);break;case"RETURN":case"SPACE":c&&(t.preventDefault(),i(t,e.getSelectedItem()));break;case"ARROW_LEFT":t.preventDefault(),c&&o(t,{selection:r.slice(0,c-1)});break;case"ARROW_UP":t.preventDefault();var u=e.getSelectionIndex();u.row-=1,o(t,{selection:e.getSelectionFromIndex(u)});break;case"ARROW_DOWN":t.preventDefault();var p=e.getSelectionIndex();p.row+=1,o(t,{selection:e.getSelectionFromIndex(p)});break;case"ARROW_RIGHT":if(t.preventDefault(),c<l){var d=s[l-1][0].dimvalid;o(t,{selection:[].concat(K(r),[d])})}}},this.close=function(t){(0,e.props.onItemClick)(t,{selection:[]})},this.onItemMouseOut=function(){e.onItemMouseOver.cancel()},this.getColumnKey=function(t){var a=t[0]||{},n=a.parent,r=a.dimvalid,o=a.displayName,i=e.props.isOffers;return n?(i?"offers":"shop")+"-column-"+n.dimvalid+"-"+n.displayName:r&&o?(i?"offers":"shop")+"-column-"+r+"-"+o:(i?"offers":"shop")+"-column-toplayer"},this.renderTaxonomy=function(){var t=e.props,a=t.taxonomy,o=t.onItemClick,i=t.onItemTouch,s=t.isEGCenabled;return r.a.createElement(n.Fragment,null,a.map((function(t){return r.a.createElement("ul",{className:Object(g.a)({blk:"h-nav",elt:"list",mods:[a.length+"-columns"]}),key:e.getColumnKey(t)},t.map((function(t){var a=t.displayName,n=s&&"Gift Cards"===a;return r.a.createElement(Z,{onClick:function(e){return o(e,t)},onHover:function(a){return e.onItemMouseOver(a,t)},onTouch:function(e){return i(e,t)},onOut:function(t){return e.onItemMouseOut(t)},showArrow:t.hasChildren||n,active:t.selected,key:"item-"+t.displayName+"-"+t.dimvalid,highlight:t.highlight,topOffer:"top-offers"===t.dimvalid,yourRegular:"your-regulars"===t.dimvalid,isEGC:n,displayName:a},t.displayName)})))})))}};X.propTypes={taxonomy:Object(s.arrayOf)(Object(s.arrayOf)(Object(s.shape)({selected:s.bool,dimvalid:Object(s.oneOfType)([s.number,s.string]),displayName:s.string,catType:s.string,parent:Object(s.shape)({displayName:s.string}),hasChildren:s.bool,selection:Object(s.arrayOf)(Object(s.oneOfType)([s.number,s.string]))}).isRequired).isRequired).isRequired,isOffers:s.bool.isRequired,onItemMouseOver:s.func,onItemClick:s.func,onItemTouch:s.func,taxonomySelection:Object(s.arrayOf)(s.number).isRequired,banners:Object(s.objectOf)(Object(s.arrayOf)(Object(s.shape)({link:Object(s.shape)({path:s.string}),mediaURL:s.string,imageAlt:s.string}))),isEGCenabled:s.bool},X.defaultProps={onItemMouseOver:function(){},onItemClick:function(){},onItemTouch:function(){},banners:[],isEGCenabled:!1};a("eqE1");a.d(t,"default",(function(){return oe})),a.d(t,"NavigationMenu",(function(){return ne})),a.d(t,"MenuItem",(function(){return ae}));var J=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var $=Object(g.a)({blk:"navigation-menu",elt:"icon"}),ee=Object(g.a)({blk:"navigation-menu",elt:"text"}),te={toggleNavigationMenu:O.toggleNavigationMenu,showTaxonomyMenu:O.showTaxonomyMenu,hideTaxonomyMenu:O.hideTaxonomyMenu,setTaxonomySelection:O.setTaxonomySelection,setTaxonomyOffers:O.setTaxonomyOffers,applyTaxonomySelection:T.a,triggerSignal:k.d},ae=function(e){var t=e.type,a=e.value,n=e.onClick,o=e.active,i=e.children,s=Object(g.a)({blk:"navigation-menu",elt:"item",mods:[o&&"active"]});return"link"===t?a.includes("http://groceries")||a.includes("https://groceries")||!a.includes("http")?r.a.createElement(E.d,{href:a,className:s,dataAutoId:"linkMenuItem",asLink:!0,category:"clear",fluid:!0,clickHandler:function(){return n(a)}},i):r.a.createElement(E.d,{href:a,className:s,dataAutoId:"linkMenuItem",asAnchor:!0,target:"_blank",category:"clear",fluid:!0},i):"recipes"===a?r.a.createElement(E.d,{dataAutoId:"linkRecipes",clickHandler:function(){return n(a)},href:"/"+a,className:s,asLink:!0,category:"clear",fluid:!0},i):r.a.createElement(E.d,{clickHandler:function(){return n(a)},className:s,type:"button",category:"clear",fluid:!0,dataAutoId:"buttonMenuItem",role:"menu",ariaProps:{"aria-expanded":o,"aria-haspopup":"menu"}},i)};ae.propTypes={type:s.string.isRequired,value:s.string.isRequired,onClick:s.func.isRequired,children:s.node.isRequired,active:s.bool},ae.defaultProps={active:!1};var ne=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));re.call(a);var n=e.setTaxonomyOffers,r=e.isOffers;return Object(y.b)().toLowerCase().indexOf("special offers")>-1&&!r&&n(!0),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),J(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.showOverBackDrop,n=t.menu,o=t.isTaxonomyVisible,i=t.isOffers,s=t.viewport,c=t.siteWidthClassName,l=n;return["large","xlarge"].indexOf(s)<0&&(l=n.slice(0,5)),r.a.createElement("nav",{className:Object(g.a)({blk:"navigation-menu",className:c}),"data-show-over-backdrop":a,"data-auto-id":"navigationMenu"},r.a.createElement("div",{className:Object(g.a)({blk:"navigation-menu",elt:"content"}),role:"menu"},l.map((function(t){return r.a.createElement("div",{key:t.name,className:Object(g.a)({blk:"navigation-menu",elt:"item-container"})},e.renderMenuItem(t))})),r.a.createElement(j.a,{rule:"large-up"},o&&(i?r.a.createElement("div",null,this.renderTaxonomyMenu()):this.renderTaxonomyMenu()))))}}]),t}(n.Component);ne.propTypes={history:Object(s.shape)({push:s.func}).isRequired,menu:Object(s.arrayOf)(Object(s.objectOf)(s.string)).isRequired,toggleNavigationMenu:s.func.isRequired,showTaxonomyMenu:s.func.isRequired,hideTaxonomyMenu:s.func.isRequired,setTaxonomySelection:s.func.isRequired,applyTaxonomySelection:s.func.isRequired,setTaxonomyOffers:s.func.isRequired,isTaxonomyVisible:s.bool.isRequired,taxonomySelection:Object(s.arrayOf)(s.number).isRequired,isOffers:s.bool.isRequired,taxonomyData:Object(s.arrayOf)(Object(s.shape)({dimvalid:s.number})).isRequired,customLinks:Object(s.objectOf)(Object(s.arrayOf)(s.object)).isRequired,breadcrumb:Object(s.arrayOf)(Object(s.shape)({dimvalid:s.number})).isRequired,showOverBackDrop:s.bool,taxonomyBanners:Object(s.objectOf)(Object(s.arrayOf)(Object(s.shape)({link:Object(s.shape)({path:s.string}),mediaURL:s.string,imageAlt:s.string}))),showMenu:s.bool,viewport:s.string,isLoggedIn:s.bool,isYourRegularEnabled:s.bool,autobasketSizeData:Object(s.shape)({totalSize:s.number,hasEligibleSize:s.bool}),triggerSignal:s.func.isRequired,customerSegments:s.string,cartID:s.string,siteWidthClassName:s.string},ne.defaultProps={showOverBackDrop:!1,taxonomyBanners:[],showMenu:!1,viewport:"",isLoggedIn:!1,isYourRegularEnabled:!1,autobasketSizeData:{totalSize:0,hasEligibleSize:!0},customerSegments:"",cartID:"",siteWidthClassName:""};var re=function(){var e=this;this.triggerAction=function(t){var a=e.props,n=a.toggleNavigationMenu,r=a.isTaxonomyVisible,o=a.showTaxonomyMenu,i=a.breadcrumb,s=a.hideTaxonomyMenu,c=a.setTaxonomySelection,l=a.setTaxonomyOffers,u=a.isOffers,p=a.showMenu,d=i.map((function(e){return e.dimvalid}));switch(t){case"shop-groceries":if(n(),l(!1),c(d),!r){o();break}if(u)break;s();break;case"shop-offers":if(n(),l(!0),c(d),!r){o();break}if(!u)break;s();break;case"recipes":break;default:s(),p&&n(),l(!1)}},this.isItemActive=function(t){var a=e.props,n=a.isTaxonomyVisible,r=a.isOffers;switch(t){case"shop-groceries":return n&&!r;case"shop-offers":return n&&r;default:return!1}},this.onItemClick=function(t,a){var n=a.selection,r=a.link,o=a.displayName,i=e.props,s=i.setTaxonomySelection,c=i.hideTaxonomyMenu,l=i.history,u=i.toggleNavigationMenu,p=i.showMenu,d=i.applyTaxonomySelection;r&&r.indexOf("yourregulars")>=-1&&new v.a("local").setItem("currentPage","taxonomy");t&&t.stopPropagation(),r&&"Gift Cards"===o&&f.isEGCenabled?(e.triggerEGCAnalytics(),l.push("/gift-card")):r?(s(),r.includes("http://groceries")||r.includes("https://groceries")||!r.includes("http")?l.push(r):window.open(r,"_blank")):(s(n),d()),c(),p&&u()},this.onItemHover=function(t,a){var n=a.selection,r=e.props.setTaxonomySelection;t&&t.stopPropagation(),r(n)},this.onItemTouch=function(t,a){var n=e.props.taxonomySelection,r=n[n.length-1];a.hasChildren&&a.dimvalid!==r?e.onItemHover(t,a):e.onItemClick(t,a)},this.triggerEGCAnalytics=function(){var t=e.props;(0,t.triggerSignal)({cartId:t.cartID,channel:"taxonomy",eventId:S.h.standardButtonClick,isPageview:!1,linkButtonText:"link_gc_nav_giftcards"})},this.triggerAnalytics=function(t){var a=e.props,n=a.triggerSignal,r=a.customerSegments,o=a.cartID,i=(new b.a).format("YYYY-MM-DD HH:MM:SS");n({isPageview:!1,isUserGenerated:!1,listName:"autobasket",eventId:S.h.p13nAutoBasketImpression,dateTimeStamp:i,channel:Object(y.b)().toLowerCase(),customerSegments:r,AutobasketState:"taxonomy",cartId:o,itemsShownAutobasket:t},!1)},this.renderTaxonomyMenu=function(){var t=e.props,a=t.isOffers,n=t.taxonomyBanners,o=t.taxonomySelection,i=t.isTaxonomyVisible,s=t.taxonomyData,c=t.customLinks,l=t.isLoggedIn,u=t.isYourRegularEnabled,p=t.autobasketSizeData,d=void 0===p?{totalSize:0,hasEligibleSize:!0}:p,m=d.hasEligibleSize,g=d.totalSize,b=l&&u&&m;!b||a||o.length||e.triggerAnalytics(g);var y=i?Object(h.c)(s,o,c,{},a,b):[];return r.a.createElement(X,{taxonomy:y,banners:n,taxonomySelection:o,isOffers:a,onItemClick:e.onItemClick,onItemMouseOver:e.onItemHover,onItemMouseOut:e.onItemMouseOut,onItemTouch:e.onItemTouch,isEGCenabled:f.isEGCenabled})},this.renderMenuItem=function(t){var a=e.isItemActive(t.value),n=["Groceries","Shop Groceries","Offers","Special Offers"].indexOf(t.name)>=0;return r.a.createElement(ae,{type:t.type,value:t.value,onClick:e.triggerAction,active:a,key:t.value},r.a.createElement(j.a,{rule:"medium-down"},r.a.createElement(E.j,{className:$,name:t.icon,size:"medium"})),r.a.createElement("span",{className:ee},r.a.createElement(j.a,{rule:"medium-down"},t.mobileName),r.a.createElement(j.a,{rule:"large-up"},t.name,n&&r.a.createElement(E.j,{size:"tiny",rotate:a?"180":"0",name:"chevron-down",className:Object(g.a)({blk:"navigation-menu",elt:"submenu-icon-chevron",mods:[a&&"active"]})}))))}},oe=Object(i.j)(Object(o.b)((function(e){var t=Object(c.i)(e),a=Object(c.f)(e),n=Object(c.d)(e,a,t),r=!!Object(p.y)(e,"isYourRegularEnabled"),o=Object(p.U)(e),i=Object(d.d)(e,"autobasket");return{viewport:Object(u.l)(e),menu:Object(l.e)(e),showMenu:Object(c.j)(e),isOffers:t,taxonomyBanners:n,taxonomySelection:a,taxonomyData:Object(c.a)(e),customLinks:Object(l.d)(e),breadcrumb:Object(l.a)(e),isYourRegularEnabled:r,isLoggedIn:o,autobasketSizeData:i,cartID:Object(m.h)(e)}}),te)(ne))}}]);