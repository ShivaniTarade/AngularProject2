window.SYNDI=window.SYNDI||[];window.SYNDI.push({"root":"https://content.syndigo.com/site/common/1.0.69/","uriDataRoot":"https://content.syndigo.com/page/f394101a-2ad0-487d-8ef5-6011b9a944d3/","siteid":"f394101a-2ad0-487d-8ef5-6011b9a944d3","trackingRoot":"https://event.syndigo.cloud/event/","customModules":["specific/webcollage/anchor/hero","specific/webcollage/anchor/inline","tracking/storage/local"],"environment":"PRODUCTION","pageIdModule":"specific/webcollage/webcollage","locale":"en-UK","waitForReadyState":2,"loadTimeout":30000,"abTestingExperiments":{"holdout":{"bucketDuration":3600000,"experimentDuration":31536000000,"threshold":0.05}},"moduleParameters":null,"hasCustomCss":false});!function(){"use strict";const e="syndi_abtesting",t=function(t){try{const n=JSON.parse(window.localStorage.getItem(e));n&&(n[t]&&delete n[t],window.localStorage.setItem(e,JSON.stringify(n)))}catch(e){}};function n(n,o){let i,a,r;if(!o||0===Object.keys(o).length)return t(n.pageid),o;const s=Object.keys(o);if(1===s.length)return t(n.pageid),o[s[0]];try{r=JSON.parse(window.localStorage.getItem(e)),r&&r[n.pageid]&&(i=r[n.pageid].ecId,a=r[n.pageid].date)}catch(e){}i&&!o[i]&&(i=void 0);const c=+new Date;if(a&&a<c&&(i=void 0,a=void 0),a||(a=+new Date+31536e6),!i){const e=s.map(e=>o[e].weight).reduce((e,t)=>t+e),t=Math.random();let n=0;s.sort().map(a=>{n+=o[a].weight/e,n>=t&&!i&&(i=a)})}r=r||{},r[n.pageid]={ecId:i,date:a},r=function(e){if(Object.keys(e).length<=10)return e;const t=+new Date,n=Object.keys(e).filter(n=>e[n].date>t).sort((t,n)=>e[t].date<e[n].date).slice(0,10),o={};return n.map(t=>o[t]=e[t]),n}(r),window.localStorage.setItem(e,JSON.stringify(r));const d=s.map(e=>e+":"+o[e].weight).join("|");return n.tracking.track("x",{ecId:i,experiment:d,decisionExpires:a}),o[i]}function o(){const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=new Array(36);let n=0;for(let o=0;o<36;o++)if(8===o||13===o||18===o||23===o)t[o]="-";else if(14===o)t[o]="4";else{n<=2&&(n=33554432+16777216*Math.random()|0);const i=15&n;n>>=4,t[o]=e[19===o?3&i|8:i]}return t.join("")}function i(e){let t={},n={};const i=o(),a=[],r=function(){n={}},s=function(e,n,...o){if(!Object.prototype.hasOwnProperty.call(t,e))return!1;if(!Object.prototype.hasOwnProperty.call(t[e],n))return!1;for(let t=a.length-1;t>=0;t--){const i=a[t];i.namespace===e&&i.topic===n&&(l(i),i.callback(...o),i.splice(t,1))}return t[e][n].map(e=>e(...o))},c=function(e,t,...o){return s(e,t,...o),"object"!=typeof n[e+"-"+t]&&(n[e+"-"+t]=[]),n[e+"-"+t].push({namespace:e,topic:t,args:o}),!0},d=function(e,t,o){const i=p(e,t,o);for(const e in n){if(!1===n.hasOwnProperty(e))continue;const t=n[e];for(let e=t.length-1;e>=0;e--)t[e].namespace===i.namespace&&t[e].topic===i.topic&&o.apply(null,t[e].args)}return i},l=function(e){if(!Object.prototype.hasOwnProperty.call(t,e.namespace))return!1;if(!Object.prototype.hasOwnProperty.call(t[e.namespace],e.topic))return!1;for(let n=0;n<t[e.namespace][e.topic].length;n++)if(t[e.namespace][e.topic][n]===e.callback)return t[e.namespace][e.topic].splice(n,1),!0;return!1},u=function(){t={},n={}},p=function(e,n,o){return Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),Object.prototype.hasOwnProperty.call(t[e],n)||(t[e][n]=[]),t[e][n].push(o),{namespace:e,topic:n,callback:o}},g=function(...t){t=JSON.parse(JSON.stringify(t)),window.SYNDI.trace({namespace:"eventBus",event:"event-bus",busName:e,busId:i,...t})};return{clearPersistentEvents:()=>{g({portName:"unknown",action:"clearPersistentEvents"}),r()},publish:(e,t,...n)=>(g({portName:"unknown",action:"publish",namespace:e,topic:t,...n}),s(e,t,...n)),publishPersist:(e,t,...n)=>(g({portName:"unknown",action:"publishPersist",namespace:e,topic:t,...n}),c(e,t,...n)),subscribe:(e,t,n)=>(g({portName:"unknown",action:"subscribe",namespace:e,topic:t}),d(e,t,n)),unsubscribe:e=>(g({portName:"unknown",action:"unsubscribe"}),l(e)),unsubscribeAll:()=>{g({portName:"unknown",action:"unsubscribeAll"}),u()},createPort:function(e){return{clearBuffer:()=>{g({portName:e,action:"clearBuffer"}),r()},subscribe:(t,n,o)=>(g({portName:e,action:"subscribe",namespace:t,topic:n}),d(t,n,o)),subscribeOnce:(t,o,i)=>(g({portName:e,action:"subscribeOnce",namespace:t,topic:o}),function(e,t,o){const i=p(e,t,o);for(const e in n){if(!1===n.hasOwnProperty(e))continue;const t=n[e];for(let e=t.length-1;e>=0;e--)if(t[e].namespace===i.namespace&&t[e].topic===i.topic)return o.apply(null,t[e].args),l(i),i}return a.push(i),i}(t,o,i)),unsubscribe:t=>(g({portName:e,action:"unsubscribe"}),l(t)),publish:(t,n,...o)=>(g({portName:e,action:"publish",namespace:t,topic:n,...o}),s(t,n,...o)),publishBuffered:(t,n,...o)=>(g({portName:e,action:"publishBuffered",namespace:t,topic:n,...o}),c(t,n,...o)),unsubscribeAll:()=>{g({portName:e,action:"unsubscribeAll"}),u()}}}}}function a(e){return null!==e&&(void 0!==e.isArray||"[object Array]"===Object.prototype.toString.call(e))}function r(e){return"function"==typeof e}function s(e){return null!==e&&"object"==typeof e}function c(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function d(e,t,n){let o,i,l,u,p,g,f,m;for(o=0,i=t.length;o<i;++o)if(l=t[o],s(l)||r(l)){for(f in u=[],l)Object.prototype.hasOwnProperty.call(l,f)&&u.push(f);for(p=0,g=u.length;p<g;p++)f=u[p],m=l[f],n&&s(m)?(w=m,"[object Date]"===Object.prototype.toString.call(w)?e[f]=new Date(m.valueOf()):c(m)?e[f]=new RegExp(m):(s(e[f])||(e[f]=a(m)?[]:{}),d(e[f],[m],!0))):e[f]=m}var w;return e}function l(e){return d(e,Array.prototype.slice.call(arguments,1),!1)}const u={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error","[object Symbol]":"symbol"};function p(e){const t=!!e&&"length"in e&&e.length,n=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[e.toString()]||"object":typeof e}(e),o=null!=e&&e===window;return!r(e)&&!o&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function g(e,t){if(p(e)){const n=e.length;for(let o=0;o<n&&!1!==t.call(e[o],o,e[o]);o++);}else for(const n in e)if(!1===t.call(e[n],n,e[n]))break}function f(e){return"string"==typeof e}function m(e){return f(e)?e.toLowerCase():e}function w(){}let h=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,y=/^<\/\s*([\w:-]+)[^>]*>/,b=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,v=/^</,S=/^<\//,k=/<!--(.*?)-->/g,I=/<!DOCTYPE([^>]*?)>/i,D=/<!\[CDATA\[(.*?)\]\]>/g,x=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P=/([^#-~| |!])/g;function E(e,t){let n,o={},i=e.split(",");for(n=0;n<i.length;n++)o[t?m(i[n]):i[n]]=!0;return o}let N,O,C=E("area,br,col,hr,img,wbr"),j=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),T=E("rp,rt"),Y=l({},T,j),R=l({},j,E("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),M=l({},T,E("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),L=E("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use"),_=E("script,style"),A=l({},C,R,M,Y,L),W=E("background,cite,href,longdesc,src,usemap,xlink:href"),U=E("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),$=E("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),q=l({},W,$,U);function B(e){return e?(N||(N=document.createElement("pre")),N.innerHTML=e.replace(/</g,"&lt;"),N.textContent):""}function J(e){return e.replace(/&/g,"&amp;").replace(x,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(P,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function z(e,t){if(0===t.indexOf("#"))return t;if(new RegExp("^(https?:)*//(a.sellpoint.net)|("+window.location.hostname.split(".").slice(-2).join(".")+")").test(t))return t.indexOf("preview.html")>-1?"unsafe:"+t:t;const n=function(e){const t=document.createElement("a");return t.href=e,t}(t),o=["qa.syndigo.cloud","uat.syndigo.cloud","content.syndigo.com"];for(let e=0;e<o.length;e++)if(n.hostname===o[e])return n.pathname.indexOf("preview.html")>-1?"unsafe:"+t:t;return"function"==typeof e.retailerwebsite.sanitizeUrl?e.retailerwebsite.sanitizeUrl(t):"local.spworld"===window.location.hostname?t:"unsafe:"+t}function F(e,t){let n=[];return function(e,t){"string"!=typeof e&&(e=null==e?"":Object.prototype.toString.call(e));let n,o,i,a,r=[],s=e;function c(e,n){let o,i=0;if(n=m(n))for(i=r.length-1;i>=0&&r[i]!==n;i--);if(i>=0){for(o=r.length-1;o>=i;o--)t.end&&t.end(r[o]);r.length=i}}function d(e,n,o,i){if(n=m(n),R[n])for(;r.last()&&M[r.last()];)c(0,r.last());Y[n]&&r.last()===n&&c(0,n),(i=C[n]||!!i)||r.push(n);let a={};o.replace(b,(function(e,t,n,o,i){let r=n||o||i||"";a[t]=B(r)})),t.start&&t.start(n,a,i)}for(r.last=function(){return r[r.length-1]};e;){if(a="",o=!0,r.last()&&_[r.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+r.last()+"[^>]*>","i"),(function(e,n){return n=n.replace(k,"$1").replace(D,"$1"),t.chars&&t.chars(B(n)),""})),c(0,r.last())):(0===e.indexOf("\x3c!--")?(n=e.indexOf("--",4),n>=0&&e.lastIndexOf("--\x3e",n)===n&&(t.comment&&t.comment(e.substring(4,n)),e=e.substring(n+3),o=!1)):I.test(e)?(i=e.match(I),i&&(e=e.replace(i[0],""),o=!1)):S.test(e)?(i=e.match(y),i&&(e=e.substring(i[0].length),i[0].replace(y,c),o=!1)):v.test(e)&&(i=e.match(h),i?(i[4]&&(e=e.substring(i[0].length),i[0].replace(h,d)),o=!1):(a+="<",e=e.substring(1))),o&&(n=e.indexOf("<"),a+=n<0?e:e.substring(0,n),e=n<0?"":e.substring(n),t.chars&&t.chars(B(a)))),e===s)throw new Error("The sanitizer was unable to parse the following block of html: "+e);s=e}c()}(t,function(e,t){let n=!1;return{start:function(o,i,a){o=m(o),!n&&_[o]&&(n=o),n||!0!==A[o]||(e.push("<"),e.push(o),g(i,(function(n,i){let a=m(n),r="img"===o&&"src"===a||"background"===a;!0!==q[a]||!0===W[a]&&!t(i,r)||(e.push(" "),e.push(n),e.push('="'),e.push(J(i)),e.push('"'))})),e.push(a?"/>":">"))},end:function(t){t=m(t),n||!0!==A[t]||(e.push("</"),e.push(t),e.push(">")),t===n&&(n=!1)},chars:function(t){n||e.push(J(t))}}}(n,(function(t){return!/^unsafe/.test(z(e,t))}))),n.join("")}async function G(e,t){e.tracking&&(t=e.tracking.appendParams(t)),t=t.replace(/^\/\//,0===location.protocol.indexOf("https")?"https://":"http://");const n=await function(e){return new Promise((function(t,n){const o=new XMLHttpRequest;o.open("GET",e,!0),o.onload=function(){this.status>=200&&this.status<400?t(this.response):n(new Error("Failed to fetch:"+e))},o.onerror=function(e){n(e)},o.send()}))}(t);return function e(t,n){if(null!=n){if(!0===n||!1===n)return n;if(f(n))return F(t,n);if("number"==typeof n)return n;if(a(n)){for(let o=n.length-1;o>=0;o--)n[o]=e(t,n[o]);return n}if(s(n)){for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&(n[o]=e(t,n[o]));return n}}}(e,JSON.parse(n))}function H(e){return void 0===O&&(O=function(){const e={};return location.search.replace(/[?|&]([^=]+)=([^&;#]+)/gi,(function(t,n,o){e[decodeURIComponent(n)]=decodeURIComponent(o)})),e}()),O[e]}const V="syndi_holdout";function Q(e){return void 0===e?+new Date:e}function X({conditions:e,callback:t,startTime:n,timeout:o,retryDelay:i}){return n=Q(n),o=o||2e4,i=i||100,e()?setTimeout(t,1):function(e,t=5e3){return+new Date-e>=t}(n,o)?t(new Error("timed out")):void setTimeout(X,i,{conditions:e,callback:t,startTime:n,timeout:o,retryDelay:i})}async function Z({conditions:e,timeout:t,retryDelay:n}){return new Promise((function(o){X({callback:function(e){o(!e)},conditions:e,retryDelay:n,timeout:t})}))}function K(e,t){const n=t.filter(t=>void 0===e.modules[t]);return e.allowDynamicModuleLoad&&n.forEach((function(t){!function(e){const t=e+".mjs?cv="+Math.floor(Date.now()/36e5)+"&hn="+encodeURIComponent(window.location.hostname);if(document.querySelector(`script[src="${t}"]`))return;const n=document.createElement("script");n.type="module",n.src=t;const o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o)}(e.root+t+".min")})),0===n.length}function ee(e){if(e.customModules&&e.customModules instanceof Array&&e.customModules.indexOf("lib/jquery")>=0)return!1;if(void 0===window.jQuery||void 0===window.jQuery.fn||void 0===window.jQuery.fn.jquery)return!1;const t=window.jQuery.fn.jquery.split(".");return t[0]>=1&&t[1]>=9}async function te(e,t,n={}){if(!t.length)return;const o={};for(;t.length;){const i=t.filter((function(e){const t=o[e];return o[e]=!0,!t}));window.SYNDI.trace({namespace:"dynamicImport",event:"request",toLoad:i});if(!await Z({conditions:()=>K(e,i),timeout:e.loadTimeout,retryDelay:e.retryDelay}))return;window.SYNDI.trace({namespace:"dynamicImport",event:"load",toLoad:i});const a=i.indexOf("lib/jquery");a>=0&&ee(e)&&(i.splice(a,1),e.$=window.jQuery),e.modules["lib/jquery"]&&void 0===e.$&&(e.$=new e.modules["lib/jquery"](e)),t.length=0,i.forEach((function(o){const i=e.getDependencies[o];i&&(t=t.concat(i(e,n)))}))}}function ne(e){return e.replace(/\/{2,}/g,"/").replace(/(https?:\/)([^/])/g,"$1/$2").replace(/^(\/[^/])/,"/$1")}async function oe(e,t,n){if(t.length>0){let o=e.uriDataRoot;window.SYNDI.isServedFromCxH()?"w"===n&&(o=o.replace(/page\/.*$/,`legacy/sp/w/${e.siteid}/w`)):o=o+"/"+n;return G(e,ne(o+"/"+encodeURIComponent(t)+".json"))}return{}}function ie(e){const t=function(e){const t=`sp_widget_${e.id}_css_listener`;let n=document.querySelector(t);return n||(n=document.createElement("div"),n.id=t,n.style.display="none",n.style.position="absolute",document.querySelector(e.targetSelector).appendChild(n),n)}(e),n=getComputedStyle(t);return"string"==typeof n.fontSize&&n.fontSize.indexOf("5311px")>=0||"string"==typeof n.content&&n.content.indexOf("sp-css-load-complete")>=0}async function ae(e,t){e.tracking&&(t=e.tracking.appendParams(t));const n=document.createElement("link");return n.rel="styleSheet",n.type="text/css",n.href=t,document.head.appendChild(n),new Promise((function(e){!function(e,t){let n;const o=function(){!n&&t&&(n=!0,t.call(e))};e.addEventListener&&e.addEventListener("load",o),e.attachEvent&&e.attachEvent("onload",o),"isApplicationInstalled"in navigator&&"onloadcssdefined"in e&&e.onloadcssdefined(o)}(n,e)}))}function re(e,t){"string"==typeof e&&e.length>0&&function(e){return void 0!==H("div")&&H("div")===e&&(void 0!==H("rwsid")||void 0!==H("prtnid"))&&(void 0!==H("pid")||void 0!==H("pageid"))&&null!==location.pathname.match(/p.html$/)&&("a.sellpoint.net"===location.host||location.host.indexOf("local.spworld")>-1)}(t)&&document.querySelector("html").setAttribute("lang",e)}async function se(e,t,n){if(e.loadedWidgetAnchors[t.targetSelector]=!0,re(t.locale,t.targetSelector.slice(1)),t.zones){const e=t.zones.filter(e=>void 0===e.empty);if((0===t.zones.length||0===e.length)&&parseInt(t.isoptional,10)&&t.widgets&&0===t.widgets.length)return void(n&&n.unregisterWidget(t))}t.version=t.version||"v0.0.0";const o=e.getDependencies[t.type],i=o?o(e,t):[];await te(e,i,t);const a=new e.modules[t.type](e,n);if(await a.init(t),n&&n.registerWidget(a),t.widgets){const n=[];g(t.widgets,(function(o,i){let r;r=void 0!==t.content&&void 0!==t.content[i]?ce(e,t.content[i],a):async function(e,t){const n=await oe(e,t,"w");return ce(e,n)}(e,i),r&&n.push(r)})),await Promise.all(n)}return a}async function ce(e,t,n,o=!1){try{!function(e,t,n){if(void 0===t.type)throw new Error("Widget type is mandatory");let o=!0;if(void 0!==e.retailerwebsite&&void 0!==e.retailerwebsite.publishrules&&(o=e.retailerwebsite.publishrules(t,n)),o&&n&&!1===t.websiteDisplayPermission&&(o=!1),!o){let e="Failed Loading Widget: permission denied, widgetid:"+t.id;throw n&&(e+=`, parentid:${n.getId()}, prtnid:${n}`),new Error(e)}}(e,t,n);if(!(await Promise.all([te(e,[t.type],t),Z({conditions:()=>document.querySelector(t.targetSelector),timeout:e.loadTimeout})]))[1])throw new Error("timed out waiting for target selector "+t.targetSelector);if(e.mediator.publish(t.targetSelector+"_to_parent","publish"),n&&(t.parentwidgetid=n.getId()),e.loadedWidgetAnchors[t.targetSelector])return;o||await async function(e,t){if(t.id.length>0&&!ie(t)){let n=e.uriDataRoot;window.SYNDI.isServedFromCxH()?n=n.replace(/page\/.*$/,`legacy/sp/w/${e.siteid}/w`):n+="/w";const o=n+"/"+encodeURIComponent(t.id)+".css";void 0!==t.waitForCSS?await ae(e,ne(o)):ae(e,ne(o))}return{}}(e,t);const i=await se(e,t,n);return e.mediator.publish("heartbeat","start"),i}catch(o){throw n&&n.unregisterWidget(t),e.tracking.trackError({msg:o.message}),o}}function de(){return"undefined"!=typeof MutationObserver}let le,ue;function pe(e){if(void 0===le){let t;try{t=window[e];const n="__syndigo_storage_test__";t.setItem(n,n),t.removeItem(n),le=!0}catch(e){le=e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}return le}function ge(e){document.querySelector("#syndigo-tab-capture-mission-control")?setTimeout(e,0):setTimeout(ge,2e3,e)}!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(ue||(ue={}));const fe={type:"xstate.init"};function me(e){return void 0===e?[]:[].concat(e)}function we(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function he(e){return t=>e===t}function ye(e){return"string"==typeof e?{type:e}:e}function be(e,t){return{value:e,context:t,actions:[],changed:!1,matches:he(e)}}const ve=(e,t)=>e.actions.forEach(({exec:n})=>n&&n(e.context,t));function Se(e){return Math.round(e/1e3)}function ke(e){const{beaconReportingRoot:t,siteid:n}=e;if(!t||!navigator.sendBeacon)return{destroy:w,newContent:w,send:w};const o={buffer:[],newContentTime:Date.now(),pageVisibleTime:0,clockSkew:void 0},i=function(e,t={}){const n={config:e,_options:t,initialState:{value:e.initial,actions:me(e.states[e.initial].entry).map(e=>we(e,t.actions)),context:e.context,matches:he(e.initial)},transition:(t,o)=>{const{value:i,context:a}="string"==typeof t?{value:t,context:e.context}:t,r=ye(o),s=e.states[i];if(s.on){const t=me(s.on[r.type]);for(const o of t){if(void 0===o)return be(i,a);const{target:t=i,actions:c=[],cond:d=(()=>!0)}="string"==typeof o?{target:o}:o;let l=a;if(d(a,r)){const o=e.states[t];let a=!1;const d=[].concat(s.exit,c,o.entry).filter(e=>e).map(e=>we(e,n._options.actions)).filter(e=>{if("xstate.assign"===e.type){a=!0;let t=Object.assign({},l);return"function"==typeof e.assignment?t=e.assignment(l,r):Object.keys(e.assignment).forEach(n=>{t[n]="function"==typeof e.assignment[n]?e.assignment[n](l,r):e.assignment[n]}),l=t,!1}return!0});return{value:t,context:l,actions:d,changed:t!==i||d.length>0||a,matches:he(t)}}}}return be(i,a)}};return n}({id:"beacon",initial:"syncing",context:{},states:{syncing:{entry:async function(){try{o.clockSkew=await async function(){const e=new XMLHttpRequest,t="https://event.syndigo.cloud/event/date";return e.open("GET",t,!0),new Promise((function(n,o){e.onload=function(){if(this.status<200||this.status>=400)return o(new Error("Failed to fetch: "+t));const i=e.getResponseHeader("Date"),a=Date.parse(new Date(Date.parse(i)).toUTCString()),r=Date.parse((new Date).toUTCString());n(a-r)},e.onerror=function(e){o(e)},e.send()}))}(),s.send("SYNC_COMPLETE")}catch(e){}},on:{SYNC_COMPLETE:"ready"}},ready:{entry:function(){document.addEventListener("visibilitychange",a),window.addEventListener("pagehide",a),window.addEventListener("beforeunload",a),s.send("visible"===document.visibilityState?"PAGE_VISIBLE":"PAGE_HIDDEN")},on:{PAGE_VISIBLE:"showing",PAGE_HIDDEN:"hidden"}},showing:{entry:function(){o.pageVisibleTime=Date.now(),r("pv",{t:Se(Date.now()-o.newContentTime)})},on:{DESTROY:"destroyed",PAGE_HIDDEN:"hidden"}},hidden:{entry:function(){const e=Date.now(),n=Se(e-o.newContentTime),i=Se(e-o.pageVisibleTime);r("ph",{pvdt:i,t:n}),function(e,t){const n=[];for(;t.buffer.length;){const o=t.buffer.shift();o.et+=t.clockSkew,JSON.stringify(n).length+JSON.stringify(o).length>8192&&(navigator.sendBeacon(e,JSON.stringify(n)),n.length=0),n.push(o)}n.length&&navigator.sendBeacon(e,JSON.stringify(n)),t.buffer.length=0,t.lastDrain=Date.now()}(t,o)},on:{DESTROY:"destroyed",PAGE_VISIBLE:"showing"}},destroyed:{entry:function(){document.removeEventListener("visibilitychange",a),window.removeEventListener("pagehide",a),window.removeEventListener("beforeunload",a)}}}}),a=function(){"hidden"===document.visibilityState?s.send("PAGE_HIDDEN"):"visible"===document.visibilityState&&s.send("PAGE_VISIBLE")},r=function(t,i){const{tracking:a}=e,r=a.getCapturedUrlParams();o.buffer.push({pxt:t,et:Date.now(),u:a.spid,siteid:n,pageid:a.getPageid(),s:a.sessionId,v:"v1.0.69",visitid:a.visitId,ref:document.referrer,...i,...r,...a.customParams})},s=function(e){let t=e.initialState,n=ue.NotStarted;const o=[],i={_machine:e,send:i=>{n===ue.Running&&(t=e.transition(t,i),ve(t,ye(i)),o.forEach(e=>e(t)))},subscribe:e=>(o.indexOf(e)<0&&o.push(e),e(t),{unsubscribe:()=>{const t=o.indexOf(e);if(t>=0)return o.splice(t,1)[0]}}),start:()=>(n=ue.Running,ve(t,fe),i),stop:()=>(n=ue.Stopped,o.length=0,i),get status(){return n}};return i}(i).start();return{destroy:function(){s.send("DESTROY")},newContent:function(){o.newContentTime=Date.now()},send:r}}function Ie(e){let t=+new Date,n=!1,i=!1;const s=ke(e),c={sessionId:void 0,spid:void 0,visitId:void 0,customParams:{},options:{},init:function(){c.getSpid()||(c.spid=o(),c.setStorage("spid",c.spid)),c.getSession()||(c.setSession(),e.mediator.publishPersist("tracking","session",c.sessionId)),c.setPageVisitId(),function(e){let t,n=!1;const o=function(){const i=+new Date-t;i>66e4||(!0===n&&e.tracking.track("h",{t:Math.round(i/1e3,0)}),setTimeout(o,i<12e4?6e3:3e4))};t=Q(t),o(),e.mediator.subscribe("heartbeat","start",(function(){n=!0})),e.mediator.subscribe("heartbeat","stop",(function(){n=!1})),e.mediator.subscribe("content","new",(function(){t=Q()}))}(e),e.mediator.subscribe("content","new",(function(){s.newContent(),e.tracking.track("p"),t=+new Date,c.visitId=void 0,c.setPageVisitId()}))},recordCartProducts:function(t){if(!0!==i){for(let n=0;n<t.length;n++)e.tracking.track("tp",t[n]);i=!0}},recordTransaction:function(t){!0!==n&&(e.tracking.track("t",t),n=!0)},track:function(n,o,i=w){o||(o={}),"a"!==n||"show"!==o.a&&"hide"!==o.a?(window.SYNDI.trace({namespace:"reporting",eventType:n,params:o}),void 0===o.dt&&(o.dt=(+new Date-t)/1e3),function(e,t){e=e.substr(0,4089);const n=new Image;n.width=1,n.border=0,n.onload=t,n.onerror=t,n.src=e}(c.appendParams(`${e.trackingRoot}${n}.gif`,o),i),"h"!==n&&s.send(n,o)):i()},trackError:function(t){e.tracking.track("e",t)},trackWidgetAction:function(t,n,o={}){const i=t.targetSelector.split("_"),a=t.id.split("_");let r,s,c,d;i.length>4&&(r=i[2],s=i[3]),c=a.length>1?a[0]:t.id,a.length>1&&(d=a[1]),o.wh=c,void 0!==d&&(o.wv=d),o.wt=t.type,void 0!==r&&(o.ph=r),void 0!==s&&(o.pv=s),o.a=n,e.tracking.track("a",o)},getCapturedUrlParams:function(){if(!e.captureUrlParams)return{};if(c.capturedUrlParams)return c.capturedUrlParams;let t=e.captureUrlParams.split(","),n={};return t.forEach((function(e){let t=e.trim(),o=H(t),i="cpt_"+t;o?c.setStorage(i,o,"y",!0):o=c.getStorage(i,o,!0),n[i]=o})),c.capturedUrlParams=n,n},appendParams:function(t,n={}){t+=(-1!==t.indexOf("?")?"&":"?")+"u="+c.spid,t+="&prtnid="+e.siteid,t+="&siteid="+e.siteid,t+="&pageid="+c.getPageid(),t+="&s="+c.sessionId,t+="&v=v1.0.69",t+="&visitid="+c.visitId;const o=function(e){if(void 0===e)return"";const t=[];let n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&!r(e[n])&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}({...n,...c.getCapturedUrlParams(),...c.customParams});return o.length>0&&(t+="&"+o),t+="&ref="+encodeURIComponent(document.referrer),t+="&r="+Math.random()},getPageid:function(){return"a.sellpoint.net"!==document.location.hostname&&"tag.retargeter.com"!==document.location.hostname||(e.pageid=H("pageid")||e.pageid),e.pageid},getStorage:function(t,n){let o=e.mediator.publish("tracking","getstorage",t);if(!1===o||!a(o))return;let i,r,s={},d=0;for(r=o.length-1;r>=0;r--)void 0!==o[r]&&(void 0!==s[o[r]]?s[o[r]]++:s[o[r]]=1,s[o[r]]>d&&(d=s[o[r]],i=o[r]));return void 0!==n&&!1===new RegExp(n).test(i)&&(i=void 0),d!==o.length&&void 0!==i&&c.setStorage(t,i),i},setStorage:function(t,n,o){const i={key:t,value:n,duration:o};e.mediator.publishPersist("tracking","setstorage",i)},getSpid:function(){return"a.sellpoint.net"===document.location.hostname&&(c.spid=H("u")),c.spid=c.spid||c.getStorage("spid","^[0-9a-zA-Z-]{36}$"),c.spid},getSession:function(){return"a.sellpoint.net"===document.location.hostname&&(c.sessionId=H("s")),c.sessionId=c.sessionId||c.getStorage("sp_ssid","^[0-9]+$"),("undefined"===c.sessionId||+new Date-c.sessionId>36e5)&&(c.sessionId=void 0),c.sessionId},setSession:function(){c.sessionId=+new Date,c.setStorage("sp_ssid",c.sessionId,"h")},setPageVisitId:function(){"a.sellpoint.net"===document.location.hostname&&(c.visitId=H("visitid")),c.visitId=c.visitId||o()},getCookie:function(e){const t=new RegExp("^.*(?:[^a-z0-9]+|^)"+e+"[ ]*=([^;]*).*$","g");let n="";return document.cookie.replace(t,(function(e,t){n=t})),n||void 0},setCookie:function(t,n,o){let i=new Date;"y"===o?i.setDate(i.getDate()+365):"h"===o?i.setMilliseconds(i.getMilliseconds()+36e5):i.setDate(i.getDate()-1);const a=void 0!==e.cookieDomain?";domain="+e.cookieDomain:"";document.cookie=`${t}=${n};expires=${i.toUTCString()};path=/${a}; SameSite=None; Secure`},setCustomParams:function(e,t){let n,o,i;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))if(void 0===c.customParams[n]||!0===t)c.customParams[n]=e[n];else if("multi"===t){for(o=0,i=n+"_"+o;!Object.prototype.hasOwnProperty.call(c.customParams,i)&&o<50;)o++,i=n+"_"+o;c.customParams[i]=e[n]}}};return c}const De=0,xe=1,Pe=2,Ee=3,Ne=4;function Oe(e){return"complete"!==document.readyState&&void 0===e.waitForReadyState||function(){switch(document.readyState){case"uninitialized":return De;case"loading":return xe;case"loaded":return Pe;case"interactive":return Ee;case"complete":return Ne;default:return-1}}()>=e.waitForReadyState}function Ce(e){const{el:t,styleId:n,type:o}=e,i=(t.shadowRoot||document).getElementById(n);if((t.shadowRoot||document).getElementById(n))return i;const a=t.shadowRoot||document.head||document.getElementsByTagName("head")[0];let r;return"external"===o?(r=document.createElement("link"),r.href=e.href,r.type="text/css",r.rel="stylesheet",a.appendChild(r)):"inline"===o&&(r=function(e,t){const n=document.createElement("style");return t.appendChild(n),n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),n}(e.css.replace(/\n/g," "),a)),r.classList.add("syndigo-widget-style"),r.setAttribute("id",n),r}async function je(e){const t=await G(e,e.uriDataRoot.replace("page","site")+"styles.json"),n={};if(Object.keys(t).map(e=>n["--syndi"+e]=t[e]),window.CSS&&CSS.supports("color","var(--fake-var)")){const e=Object.keys(n).map(e=>`${e} : ${n[e]};`);Ce({el:document.head,styleId:"syndigo-site-styles",type:"inline",css:`:root { ${e.join("")} }`})}else{(await window.SYNDI.importDynamic("lib/ponyfill-css-vars"))({include:"style.syndigo-widget-style",variables:n,shadowDOM:!0,silent:!0,updateURLs:!1,watch:de(),onError:function(t){e.tracking.track("e",{message:t})}})}}!function(e){if(void 0!==e&&!(e instanceof Array)&&void 0!==e.registerModule)return;const t={abTestingExperiments:{},allowDynamicModuleLoad:!0,beaconReportingRoot:void 0,captureUrlParams:void 0,contentPresence:{hotspots:!1,mosaic:!1,powerpage:!1},cookieDomain:void 0,css:{},customModules:[],environment:"",experiencesByContentId:{},getDependencies:{},hasContent:void 0,loadTimeout:5e3,loadedWidgets:[],loadedWidgetAnchors:{},loadedWidgetTypes:{},locale:void 0,modules:{},retryDelay:100,root:"//a.sellpoint.net/w/spworld/",trackingRoot:"//t.sellpoints.com/",uriDataRoot:"./",waitForReadyState:Pe};let o=[];function c(e){const n=t.customModules.filter(e),o=[];return n.forEach((function(e){const n=new t.modules[e](t);void 0!==n.init&&o.push(n.init())})),Promise.all(o)}function d(e,n,o){var i;Object.prototype.hasOwnProperty.call(e,n)?"customModules"===n?t.customModules=t.customModules.concat(e[n]):"abTestingExperiments"===n?t.abTestingExperiments=e[n]||{}:"allowDynamicModuleLoad"===n?t.allowDynamicModuleLoad="yes"===(i=e[n])||"true"===i||!!Number(i):t[n]=e[n]:void 0!==o&&(t[n]=o)}const l=async function(e){let n,o,i,a=!1;try{[n,o,i]=await Promise.all([window.SYNDI.importDynamic("experience/power-page"),window.SYNDI.importDynamic("experience/hotspots/hotspots"),window.SYNDI.importDynamic("experience/mosaic")])}catch(e){return t.tracking.trackError({type:"haciao",message:"could not load enhanced content JSON for powerpage"}),a}if(!e.experiences)return a;if(e.experiences["power-page"]){t.contentPresence.powerpage=!0,a=!0;new n(t).init({componentId:e.componentId,enhancedProductContentId:e.enhancedProductContentId,...e.experiences["power-page"]})}if(e.experiences.hero){const n=function(e,t){let n,o,i,a;const r=e.abTestingExperiments.holdout;if(!r||window.location.host.indexOf("syndigo")>-1)return!0;try{a=JSON.parse(window.localStorage.getItem(V)),a&&(n=a.userExcludeGroup,o=a.bucketExpires,i=a.experimentExpires)}catch(e){}const s=+new Date;let c;return n=void 0!==n?n:Math.random()>=r.threshold?1:0,o=void 0!==o?o:s+r.bucketDuration,i=void 0!==i?i:s+r.experimentDuration,c=o<=s||i<=s||1===n,i<=s?(window.localStorage.removeItem(V),c):(a={userExcludeGroup:n,bucketExpires:o,experimentExpires:i},window.localStorage.setItem(V,JSON.stringify(a)),e.tracking.track("x",{display:c,ecId:t,...a}),c)}(t,e.enhancedProductContentId);if(e.experiences.hero.heroImages.length){if(n){t.contentPresence.hotspots=!0;new o(t).init({componentId:e.componentId,enhancedProductContentId:e.enhancedProductContentId,...e.experiences.hero})}a=!0}if(e.experiences.hero.mosaicWidgetIds.length){if(n){t.contentPresence.mosaic=!0;new i(t).init({componentId:e.componentId,enhancedProductContentId:e.enhancedProductContentId,...e.experiences.hero})}a=!0}}return a&&(await je(t),t.mediator.publish("heartbeat","start")),t.mediator.publish("contentPresence","changed",{...t.contentPresence}),a},u=async function(e){if(!e)return;let o,i;if(t.hasContent=void 0,t.mediator.publish("content","new"),t.experiencesByContentId[e])window.SYNDI.trace({namespace:"contentLoad",event:"load-contentid",pageid:e}),i=t.experiencesByContentId[e];else{window.SYNDI.trace({namespace:"contentLoad",event:"load-pageid",pageid:e});try{o=await oe(t,e,"l"),i=o.experiences}catch(e){}}const a=o&&(o.widgets&&o.widgets.length||Object.keys(o.experiences||{}).length>0);if(window.SYNDI.trace({namespace:"contentLoad",event:"has-widgets-to-load",hasWidgetsToLoad:a}),!a&&r(t.retailerwebsite.fallbackPageIdentifier)){const e=t.retailerwebsite.fallbackPageIdentifier();if(!e||e===t.pageid)return t.hasContent=!1,void(r(t.contentCallback)&&t.contentCallback(!1));window.SYNDI.trace({namespace:"contentLoad",event:"fallback-pageid",pageid:e}),window.SYNDI.trace({namespace:"frameworkState",event:"pageid",pageid:e}),t.pageid=e,t.mediator.publish("content","new");try{o=await oe(t,e,"l")}catch(e){o={}}i=o.experiences}if(o.widgets=o.widgets||[],t.staticWidgets){const e=function(e){const t={};for(let n=0;n<e.length;n++){const o=e[n].split("_");t[o[0]]=parseInt(o[1],10)}return t},n=e(t.staticWidgets),i=e(o.widgets);for(const e in n)n.hasOwnProperty(e)&&(!i.hasOwnProperty(e)||n[e]>i[e])&&o.widgets.unshift(e+"_"+n[e])}if(o.siteid?t.siteid=o.siteid:o.retailerid?t.siteid=o.retailerid:o.prtnid&&(t.siteid=o.prtnid),t.siteid&&window.SYNDI.trace({namespace:"contentLoad",event:"set-siteid",siteid:t.siteid}),o.retailerwebsitepagetype&&o.retailerwebsitepagetype.name&&(t.pagetype=o.retailerwebsitepagetype.name.toLowerCase(),window.SYNDI.trace({namespace:"contentLoad",event:"set-pagetype",pagetype:t.pagetype})),t.mediator.publishPersist("abtesting","page-data",o),i&&Object.keys(i).length>0){const e=n(t,i);t.hasContent=await l(e)}else t.hasContent=!1;r(t.contentCallback)&&t.contentCallback(t.hasContent),await g(o,o.widgets)},p=async function(e){try{const n=await oe(t,e,"w"),o=await ce(t,n);o&&(t.loadedWidgets.push(o),t.loadedWidgetTypes[o.getType().split("/").pop()]=!0)}catch(e){e.message,t.tracking.trackError({message:e.message});const n=(t.environment||"").replace("/","").toLowerCase();if(["dev","staging","qa","uat"].indexOf(n)>-1)throw e}},g=async function(e,n=[]){t.loadedWidgetAnchors={};const o=n.filter(n=>!t.abTesting||t.abTesting.displayWidget(e,n));window.SYNDI.trace({namespace:"contentLoad",event:"load-widgets",widgetids:o});const i=o.map(p);window.SYNDI.trace({namespace:"contentLoad",event:"load-widgets-complete"}),await Promise.all(i),t.mediator.publishPersist("abtesting","saveExperimentsToStorage"),r(t.noContentCallback)&&t.noContentCallback(t.loadedWidgetTypes)};t.getSPname=function(e,t){if(void 0===this)return;const n="sp_widget_"+this.id+"_"+e;return void 0===t?n:t+n},t.$getSPname=function(e,n,o){let i="";return void 0===o&&(o="holder"),e!==o&&(i+=t.getSPname.call(this,o,"#")+" "),void 0===n&&(n="#"),i+=t.getSPname.call(this,e,n),t.$(i)};const m=function(){window.SYNDI.trace({namespace:"contentLoad",event:"reset"}),t.loadedWidgets.forEach(e=>{r(e.destroy)&&e.destroy()}),t.loadedWidgets.length=0,t.contentPresence.hotspots=!1,t.contentPresence.mosaic=!1,t.contentPresence.powerpage=!1,t.mediator.publish("contentPresence","changed",{...t.contentPresence})},h=async function(...e){if(void 0!==t.mediator){for(let n=0;n<e.length;n++)if(f(e[n])){const o=F(t,e[n].trim());o!==t.pageid&&(window.SYNDI.trace({namespace:"frameworkState",event:"pageid",pageid:o}),t.pageid=o,await u(e[n]))}else if(s(e[n]))if("track"===e[n].type)t.mediator.publishPersist("tracking","event",e[n]);else if(r(e[n].contentCallback)){const o=r(t.contentCallback)?t.contentCallback:void 0;t.contentCallback=t=>{o&&o(t),e[n].contentCallback(t)},void 0!==t.hasContent&&e[n].contentCallback(t.hasContent)}}else o=o.concat(e)};setTimeout((async function(){e instanceof Array&&e.filter(e=>"object"==typeof e).map(e=>function(e){window.SYNDI.trace({namespace:"boot",event:"forward-config-properties"});const t=["abTestingExperiments","allowDynamicModuleLoad","beaconReportingRoot","cacheBuster","captureUrlParams","contentCallback","noContentCallback","cookieDomain","customModules","environment","loadTimeout","locale","pageIdModule","ecJsonURL","prtnid","siteid","retryDelay","root","staticWidgets","trackingRoot","uriDataRoot","waitForReadyState","widgethash"];for(let n=0;n<t.length;n++)d(e,t[n])}(e)),t.siteid=t.siteid||t.prtnid||0,window.SYNDI.trace({namespace:"boot",event:"set-site-id",siteid:t.siteid}),window.SYNDI.trace({namespace:"boot",event:"wait-for-document-ready"}),await async function(e){await Z({conditions:()=>Oe(e),timeout:e.loadTimeout})}(t);let n=[];n=n.concat(t.customModules),t.pageIdModule&&(n=n.concat(t.pageIdModule));try{window.SYNDI.trace({namespace:"boot",event:"import-custom-modules"}),await te(t,n)}catch(e){t.tracking.trackError({message:"syndi failed to load dependencies "+e,type:"framework"})}await async function(){window.SYNDI.trace({namespace:"boot",event:"setup-framework-eventbus"}),t.mediator=i("main-bus"),t.mediator.subscribe("content","new",(function(){t.mediator.clearPersistentEvents()})),window.SYNDI.trace({namespace:"boot",event:"init-tracking-modules"}),await c(e=>t.modules[e]&&e.indexOf("tracking/storage")>-1),t.tracking=new Ie(t),t.tracking.init(),void 0!==t.pageIdModule&&(window.SYNDI.trace({namespace:"boot",event:"attach-pageid-module"}),t.retailerwebsite=new t.modules[t.pageIdModule](t),void 0!==t.retailerwebsite.pageType&&(window.SYNDI.trace({namespace:"boot",event:"determine-pagetype"}),t.pagetype=t.retailerwebsite.pageType()));const n=e.concat(o).filter(e=>"string"==typeof e);t.pageid=n.pop(),window.SYNDI.trace({namespace:"frameworkState",event:"pageid",pageid:t.pageid}),window.SYNDI.trace({namespace:"boot",event:"extract-pageid",pageIds:n,extracted:t.pageid}),!t.pageid&&t.retailerwebsite&&(t.pageid=t.retailerwebsite.pageidentifier(),window.SYNDI.trace({namespace:"frameworkState",event:"pageid",pageid:t.pageid}),window.SYNDI.trace({namespace:"boot",event:"extract-specific-pageid",pageid:t.pageid})),window.SYNDI.trace({namespace:"boot",event:"initialize-nontracking-modules"}),await c(e=>e.indexOf("tracking/storage")<0)}();const s=e.concat(o);if(await h(s.filter(e=>e&&void 0!==e.type)),void 0!==t.pageid||void 0!==t.widgethash||void 0!==t.staticWidgets||void 0!==t.ecJsonURL){if(void 0===t.widgethash&&void 0===t.ecJsonURL)window.SYNDI.trace({namespace:"boot",event:"load-content-by-pageid"}),await u(t.pageid);else if(t.ecJsonURL){const e=await G(t,t.ecJsonURL);await l(e)}else if(t.widgethash){t.pageid="widgetHashPreview-"+t.widgethash,window.SYNDI.trace({namespace:"frameworkState",event:"pageid",pageid:t.pageid}),window.SYNDI.trace({namespace:"boot",event:"load-content-by-widgethash"});const e=a(t.widgethash)?t.widgethash:[t.widgethash],n=H("div");n&&n.indexOf("sp_widget_")>-1&&t.mediator.publishPersist(n+"_to_child","open"),await g({},e)}window.SYNDI.trace({namespace:"boot",event:"reset-on-new-content-events"}),t.mediator.subscribe("content","new",m),setTimeout(()=>{void 0===t.hasContent&&r(t.contentCallback)&&t.contentCallback(!1)},t.loadTimeout)}}),1),window.SYNDI={push:h,importDynamic:async function(e){return await te(t,[e]),t.modules[e]},isServedFromCxH:()=>t.uriDataRoot.indexOf("syndigo")>-1,version:()=>"v1.0.69",registerModule:function(e){void 0===t.modules[e.type]&&(t.modules[e.type]=e.moduleclass,t.getDependencies[e.type]=e.getDependencies)},reset:m},async function(){if(!pe("localStorage")||"on"!==localStorage.getItem("syndigo-mission-control"))return window.SYNDI.trace=w,void(window.SYNDI.showMissionControl=w);const e=[];let t,n,o=0;n=de()?MutationObserver:await window.SYNDI.importDynamic("lib/ponyfill-mutation-observer"),ge((function(){new n((function(e){for(const t of e)for(let e=0;e<t.addedNodes.length;e++)a({namespace:"tabVideoCapture",event:"tab-video-capture",src:t.addedNodes[e].src,t:parseInt(t.addedNodes[e].getAttribute("data-t"),10)})})).observe(document.getElementById("syndigo-tab-capture-mission-control"),{childList:!0})}));const i=function(){if(t)for(let n=o;n<e.length;n++)t.postMessage(e[n]),o++},a=function(t){e.push({t:Date.now(),...t}),i()};window.SYNDI.showMissionControl=async function(){t=window.open("","MissionControl","titlebar=yes,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=500,height=600"),t.document.body.innerText.length>0||(t.document.write("<div></div>"),window.addEventListener("beforeunload",(function(){t.close()})),(await window.SYNDI.importDynamic("framework/mission-control/mission-control"))(t.document.querySelector("div")),o=0,i())},window.SYNDI.trace=a}()}(window.SYNDI),window.SYNDI.registerModule({type:"tracking/event/event",getDependencies:function(){return[]},moduleclass:function(e){const t={addToCart:"k",transaction:"t",transactionItem:"tp",default:"cd",spRtMap:"map"},n={k:["qty","sku","price"],t:["orderid","total"],tp:["orderid","sku","price","count"],map:["sid","cid"]};function o(i){let a=t[i.event]||t.default;if(!1===function(e,t){if(n.hasOwnProperty(e))for(let o=0;o<n[e].length;o++)if(!1===t.hasOwnProperty(n[e][o]))return!1;return!0}(a,i))return e.tracking.trackError({type:"eventTracking",message:"Missing mandatory parameter for the pixel "+a+" ["+JSON.stringify(n[a])+"]"});void 0!==(i=function(e,t){if("map"!==e){if("t"===e&&t.hasOwnProperty("items")&&t.items instanceof Array){for(let e=0;e<t.items.length;e++){const n=t.items[e];n.orderid=t.orderid,n.event="transactionItem",o(n)}delete t.items}return t}}(a,i))&&e.tracking.track(a,i)}return{init:function(){e.mediator.subscribe("tracking","event",o)}}}}),window.SYNDI.registerModule({type:"specific/webcollage/anchor/hero",getDependencies:function(){return[]},moduleclass:function(){return{init:function(){!function(){const e=document.createElement("div");e.id="syndi_mosaic";const t=document.querySelector("#wc-mosaic");if(t)t.appendChild(e);else if(window.Webcollage&&window.Webcollage.mosaicTargetSelector){const t=document.querySelector(window.Webcollage.mosaicTargetSelector);t&&t.appendChild(e)}}()}}}}),window.SYNDI.registerModule({type:"specific/webcollage/anchor/inline",getDependencies:function(){return[]},moduleclass:function(){return{init:function(){!function(){const e=document.createElement("div");e.id="syndi_powerpage";const t=document.querySelector("#wc-power-page");t&&t.appendChild(e)}()}}}}),window.SYNDI.registerModule({type:"tracking/storage/local",getDependencies:function(){return[]},moduleclass:function(e){const t=function(e){const t=window.localStorage.getItem(e);if(null!==t)return t},n=function(n){const o=t(n.key);window.localStorage.setItem(n.key,n.value),void 0!==o&&o!==n.value&&e.tracking.track("ns",{type:"local",oldValue:o,newValue:n.value,key:n.key})};return{init:function(){pe("localStorage")&&(e.mediator.subscribe("tracking","setstorage",n),e.mediator.subscribe("tracking","getstorage",t))}}}}),window.SYNDI.registerModule({type:"specific/webcollage/webcollage",getDependencies:function(){return[]},moduleclass:function(e){return{pageidentifier:function(){const t=window.Webcollage&&window.Webcollage.cpi;if(t)return t;const n=new Date,o=setInterval(()=>{const t=window.Webcollage&&window.Webcollage.cpi;t?(window.SYNDI.push(t),clearInterval(o)):new Date-n>e.loadTimeout&&clearInterval(o)},300)}}}})}();
